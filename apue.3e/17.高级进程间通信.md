# 17.1 引言
UNIX域套接字可以在同一计算机系统上运行的两个进程之间传送打开文件描述符。服务进程可以使它们的打开文件描述符与指定的名字相关联，同一系统上运行的客户进程可以使用这些名字与服务器进程汇聚。<br>
# 17.2 UNIX域套接字
UNIX域套接字用于在同一台计算机上运行的进程之间的通信。UNIX域套接字仅仅复制数据，它们并不执行协议处理，不需要添加或删除网络报头，无需计算校验和，不要产生顺序号，无需发送确认报文。<br>

UNIX域套接字提供流和数据报两种接口。UNIX域数据报服务是可靠的，既不会丢失报文，也不会传递出错。UNIX域套接字就像是套接字和管道的混合。可以使用它们面向网络的域套接字接口或使用`socketpair`函数来创建一对无名的、相互连接的UNIX域套接字。<br>
```c++
#include <sys/socket.h>
int socketpair(int domain, int type, int protocol, int sockfd[2]);
// 返回值：若成功，返回 0；若出错，返回 -1
```
一对相互连接的UNIX域套接字可以起到全双工管道的作用：两端对读和写开放。将其称为`fd`管道，以便与普通的半双工管道区分开来。<br>

可以命名UNIX域套接字（即将套接字与一个地址绑定），并可将其用于告示服务。<br>

UNIX域套接字的地址由`sockaddr_un`结构表示。<br>
```c++
struct sockaddr_un {
    sa_family_t sun_family;		// AF_UNIX
    char sun_path[108];			// pathname
};
```
`sockaddr_un`的`sun_path`成员名包含一个路径名。当我们将一个地址绑定到一个UNIX域套接字时，系统会用该路径名创建一个`S_IFSOCK`类型的文件。<br>

如果试图绑定同一个地址时，该文件已经存在，那么`bind`请求会失败。当关闭套接字时，并不自动删除该文件，所以必须确保在应用程序退出前，对该文件执行解除链接操作。<br>
# 17.3 唯一连接
服务器进程可以使用标准`bind`、`listen`和`accept`函数，为客户进程安排一个唯一UNIX域连接。客户进程使用`connect`与服务器进程联系。在服务器进程接受了`connect`请求后，在服务器进程和客户进程之间就存在了唯一连接。（此操作与因特网域套接字操作相同）
# 17.4 传送文件描述符